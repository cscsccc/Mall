import{g as v,b as x,k as _,r as c,o as k,h as w,e as a,w as n,C as z,F as P,B as D,f as F,c as N,a as d,j as f,x as b,t as h,D as S,E as i,y as B,z as L}from"./index-BJIwiziA.js";const T={__name:"Table",props:{action:String},setup(m,{expose:l}){const u=m,p=D(),{goTop:s}=p.appContext.config.globalProperties,e=v({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});x(()=>{r()});const r=()=>{e.loading=!0,_.get(u.action,{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,s&&s()})},o=t=>{e.multipleSelection=t},g=t=>{e.currentPage=t,r()};return l({state:e,getList:r}),(t,I)=>{const y=c("el-table"),C=c("el-pagination");return k(),w(P,null,[a(y,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:o},{default:n(()=>[z(t.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:g},null,8,["total","page-size","current-page"])],64)}}},E={class:"header"},M={__name:"Guest",setup(m){let l=F(null);const u=()=>{if(!l.value.state.multipleSelection.length){i.error("请选择项");return}_.put("/users/0",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{i.success("解除成功"),l.value.getList()})},p=()=>{if(!l.value.state.multipleSelection.length){i.error("请选择项");return}_.put("/users/1",{ids:l.value.state.multipleSelection.map(s=>s.userId)}).then(()=>{i.success("禁用成功"),l.value.getList()})};return(s,e)=>{const r=c("el-button"),o=c("el-table-column"),g=c("el-card");return k(),N(g,{class:"guest-container"},{header:n(()=>[d("div",E,[a(r,{type:"primary",icon:b(B),onClick:u},{default:n(()=>e[0]||(e[0]=[f("解除禁用")])),_:1},8,["icon"]),a(r,{type:"danger",icon:b(L),onClick:p},{default:n(()=>e[1]||(e[1]=[f("禁用账户")])),_:1},8,["icon"])])]),default:n(()=>[a(T,{action:"/users",ref_key:"table",ref:l},{column:n(()=>[a(o,{type:"selection",width:"55"}),a(o,{prop:"nickName",label:"昵称"}),a(o,{prop:"loginName",label:"登录名"}),a(o,{label:"身份状态"},{default:n(t=>[d("span",{style:S(t.row.lockedFlag==0?"color: green;":"color: red;")},h(t.row.lockedFlag==0?"正常":"禁用"),5)]),_:1}),a(o,{label:"是否注销"},{default:n(t=>[d("span",{style:S(t.row.lockedFlag==0?"color: green;":"color: red;")},h(t.row.isDeleted==0?"正常":"注销"),5)]),_:1}),a(o,{prop:"createTime",label:"注册时间"})]),_:1},512)]),_:1})}}};export{M as default};
