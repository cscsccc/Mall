import{_ as P,g as S,b as z,k as h,c as N,w as s,B,r,o as l,a as b,e as o,j as $,x as D,h as c,v as E,y as G,E as V}from"./index-BJIwiziA.js";const M={class:"header"},T=["src"],j={key:0,style:{color:"green"}},q={key:1,style:{color:"red"}},A=["onClick"],L=["onClick"],R=["onClick"],W={__name:"Good",setup(F){const m=B(),{goTop:p}=m.appContext.config.globalProperties,g=E(),t=S({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10});z(()=>{i()});const i=()=>{t.loading=!0,h.get("/goods/list",{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then(e=>{t.tableData=e.list,console.log(t.tableData),t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1,p&&p()})},k=()=>{g.push({path:"/add"})},f=e=>{g.push({path:"/add",query:{id:e}})},y=e=>{t.currentPage=e,i()},u=(e,d)=>{h.put(`/goods/status/${d}`,{ids:e?[e]:[]}).then(()=>{V.success("修改成功"),i()})},x=e=>e.startsWith("http")?e:`http://backend-api-02.newbee.ltd${e}`;return(e,d)=>{const C=r("el-button"),n=r("el-table-column"),w=r("el-table"),v=r("el-pagination"),I=r("el-card");return l(),N(I,{class:"good-container"},{header:s(()=>[b("div",M,[o(C,{type:"primary",icon:D(G),onClick:k},{default:s(()=>d[0]||(d[0]=[$("新增商品")])),_:1},8,["icon"])])]),default:s(()=>[o(w,{loading:t.loading,data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"}},{default:s(()=>[o(n,{prop:"goodsId",label:"商品编号"}),o(n,{prop:"goodsName",label:"商品名"}),o(n,{prop:"goodsIntro",label:"商品简介"}),o(n,{label:"商品图片",width:"150px"},{default:s(a=>[(l(),c("img",{style:{width:"100px",height:"100px"},key:a.row.goodsId,src:x(a.row.goodsCoverImg),alt:"商品主图"},null,8,T))]),_:1}),o(n,{prop:"stockNum",label:"商品库存"}),o(n,{prop:"sellingPrice",label:"商品售价"}),o(n,{label:"上架状态"},{default:s(a=>[a.row.goodsSellStatus==0?(l(),c("span",j,"销售中")):(l(),c("span",q,"已下架"))]),_:1}),o(n,{label:"操作",width:"100"},{default:s(a=>[b("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:_=>f(a.row.goodsId)},"修改",8,A),a.row.goodsSellStatus==0?(l(),c("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>u(a.row.goodsId,1)},"下架",8,L)):(l(),c("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:_=>u(a.row.goodsId,0)},"上架",8,R))]),_:1})]),_:1},8,["loading","data"]),o(v,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:y},null,8,["total","page-size","current-page"])]),_:1})}}},J=P(W,[["__scopeId","data-v-1005816e"]]);export{J as default};
